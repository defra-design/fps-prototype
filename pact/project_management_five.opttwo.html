<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="https://design-system.service.gov.uk/stylesheets/govuk-frontend-110050e5900f36079383aecb46ca62bc.min.css" rel="stylesheet"/> -->
    <link rel="stylesheet" href="../css/pact_styles/govuk-frontend-6.0.0.min.css" />
     <link rel="stylesheet" href="../css/pact_styles/custom_style.css" />
    <link rel="stylesheet" href="nav_menu/navstyle.css" />
    <script src="nav_menu/menutemplate.js"></script>
    <link rel="stylesheet" href="../css/pact_styles/style.css" />
    <link rel="stylesheet" href="../css/pact_styles/suppliement_style_over_gov.uk_style.css" />
    
    <title>2025-2026 : Project Management - PACT</title>
    <style>
        .dropdown-toggle::after {
            border: 0;
        }


        tbody#timejobtabletableBody>tr>td:nth-child(4)>button {
            background: none;
            border: 0;
            outline: none;
            cursor: pointer;
            padding: 0;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        .btn-outline-primary a:hover {
            color: #fff;
            text-decoration: none;
        }

 .custom-table td,.timecode-table th,.timecode-table td {
  padding: 6px 10px !important; 
  white-space: nowrap;
} 

 tbody#timejobtabletableBody>tr>td {
     padding:10px 10px !important;
 }

    </style>
    <script>


        function toggleSideform() {
            const sideform = document.querySelector('.sideform');
            sideform.classList.toggle('open');
            const sidebar = document.querySelector('.backdrop');
            sidebar.classList.toggle('open');
        }



    </script>
</head>

<body>



    <header>
        <div class="header-nav">

            <div class="pims-log-wrapper">

                <div>
                    <img src="../images/defra_logo.png" width="80px" alt="Animal & Plant Health Agency" />
                </div>

                <div class="pims-log">
                    <span>PACT</span>
                </div>

                <div class="pims-log" style="width: 160px;font-size: 16px;">
                    <label for="dpSelectyear" class="sr-only">select year</label>
                    <select id="dpSelectyear" aria-label="Select year dropdown" class="pims-log"
                        style="border: 0;border-radius: 0;margin-left: 0px;width: 150px;outline: 0;">
                        <option>2017-2018</option>
                        <option>2018-2019</option>
                        <option>2019-2020</option>
                        <option>2020-2021</option>
                        <option>2021-2022</option>
                        <option>2022-2023</option>
                        <option>2023-2024</option>
                        <option>2024-2025</option>
                        <option selected>2025-2026</option>
                    </select>

                </div>
            </div>




        </div>
    </header>
    <div id="header"></div>

    <script src="../pact/nav_menu/script.js"></script>

    <script>
        document.getElementById('header').innerHTML = htmlmenu;
        initMenu();
        btn();
    </script>


  
  
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            <h1 class="govuk-heading-s sup_border-bottom" style="padding:10px 0 10px 10px"> Project Maintenance (not portfolios)  <a href="project_management_five.three.html" class="govuk-back-link sup_align_right">Back</a></h1>
        </div>
    </div>
   <div style="display: flex;
    margin-left: 0;
    margin-right: 0;" class="govuk-grid-row">
    <nav class="sidenav flex-column flex-shrink-0" id="shortnav">
                <button class="toggle-btn" onclick="toggleSidebar()" style="right: -8px; top: 30px;">
                    <img src="../images/chevron-left-solid-full.svg" width="20" alt="side menu left arrow" style="margin: -4px 8px 0 -4px;"/>
                </button>
                <ul>
                    <!-- <li class="sidebar-link-two" style="border-radius: 0 8px 8px 0; cursor: pointer; background-color: #1d70b8;">
                                    <a id="btnSection2" style="color: #fff;">Project code</a>
                                </li>
                                <li class="sidebar-link-two" style="border-radius: 0 8px 8px 0; cursor: pointer; background-color: #1d70b8;">
                                    <a id="btnSection1" style="color: #fff;">Project Details</a>
                                </li> -->
                    <li class="sidebar-link-two"
                        style="border-radius: 0 8px 8px 0; cursor: pointer; background-color: #1d70b8;">
                        <a href="#" style="color: #fff;">Invoices & Subcontracted Costs</a>
                    </li>
                    <li class="sidebar-link-two"
                        style="border-radius: 0 8px 8px 0;cursor: pointer; background-color: #1d70b8;">
                        <a href="#" style="color: #fff;"> Milestones</a>
                    </li>
                    <li class="sidebar-link-two"
                        style="border-radius: 0 8px 8px 0; cursor: pointer; background-color: #1d70b8;">
                        <a href="#" style="color: #fff;">Test Purchase Requirements</a>
                    </li>
                </ul>
            </nav>
             <div class="govuk-grid-column-full govuk-grid-row">
        <div class="govuk-grid-row">
            
                <div class="govuk-grid-column-one-half">
                    
                        <div class="govuk-grid-column-one-half">
                            <div class="govuk-form-group sup_margin_0">
                                            <label class="govuk-label" for="project-code">
                                                Project Code:
                                            </label>
                                            <input class="govuk-input" id="project-code" name="projectcode" type="text" autocomplete="project-code">
                            </div>

                                        <div class="govuk-!-display-inline">
                                            <div class="govuk-checkboxes__item sup_justify_content">
                                                <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                                                    <div class="govuk-checkboxes__item">
                                                
                                                        <input class="govuk-checkboxes__input" id="chkfinished" name="chkfinished" type="checkbox" value="finished">
                                                        <label class="govuk-label govuk-checkboxes__label sup_label_auto_width" for="chkfinished">
                                                            Finished
                                                        </label>
                                                    </div> 
                                                    
                                                </div>
                                            <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                                                <div class="govuk-checkboxes__item">
                                                
                                                    <input class="govuk-checkboxes__input" id="chkdefraproject" name="chkdefraproject" type="checkbox"
                                                        value="defraproject">
                                                    <label class="govuk-label govuk-checkboxes__label sup_label_auto_width" for="chkdefraproject">
                                                        Defra Project
                                                    </label>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                        </div>

                        <div class="govuk-grid-column-one-half">
                            <div class="govuk-form-group">
                                            <label class="govuk-label" for="project-title">
                                                Title:
                                            </label>
                                            <textarea class="govuk-textarea sup_margin_0" id="project-title" name="projectTitle" rows="3"></textarea>
                                        </div>
                        </div>
                    
                            <div class="govuk-grid-column-full sup_margin_bottom_left_10 sup_p_0">
                                    <div class="sup_border" style="flex-direction: column; display: flex;padding-bottom:6px;">
                                        <div>
                                            <h2 class="sup_border-bottom sup_text_color sup_heading_bg_color govuk-heading-s sup_align_heading"> Business Area</h2>
                                        </div>
                                        <div class="sup_business_area_wrapper govuk-grid-row">
                                            <div class="govuk-grid-column-one-half">

                                                    <div class="govuk-form-group">
                                                        <label class="govuk-label" for="dpprogramme">Programme:</label>
                                                        <select class="govuk-select sup_select_option_width_100" id="dpprogramme" name="dpprogramme" aria-label="programme select">
                                                            <option value="">--select programme--</option>
                                                            <option value="Bee Insp" selected>Bee Insp</option>
                                                            <option value="BTB">BTB</option>
                                                            <option value="Comm">Comm</option>
                                                            <option value="CSU">CSU</option>
                                                            <option value="DoES">DoES</option>
                                                            <option value="DSG">DSG</option>
                                                            <option value="EU Exit">EU Exit</option>
                                                            <option value="GM">GM</option>
                                                            <option value="HNC">HNC</option>
                                                            <option value="IMT">IMT</option>
                                                            <option value="LabT">LabT</option>
                                                        </select>
                                                    </div>

                                                    
                                                <div class="govuk-form-group">
                                                    <label for="dpstatus" class="govuk-label">Status:</label>
                                                    <select class="govuk-select sup_select_option_width_100" required="" id="dpstatus"
                                                        aria-label="Default select example">
                                                        <option value="">--select status--</option>
                                                        <option value="Approved" selected>Approved</option>
                                                        <option value="Completed">Completed</option>
                                                        <option value="Not Approved">Not Approved</option>
                                                    </select>
                                                </div>
                                                <div class="govuk-form-group sup_margin_bottom_20">
                                                    <label for="dpdisease" class="govuk-label">Disease:</label>
                                                    <select class="govuk-select sup_select_option_width_100" required="" id="dpdisease"
                                                        aria-label="Default select example">
                                                        <option value="">--select disease--</option>
                                                        <option value="Asian hornet" selected>Asian hornet</option> 
                                                        <option value="Aujeszky's Disease">Aujeszky's Disease</option>
                                                        <option value=" Avian influenza"> Avian influenza</option>
                                                        <option value="Biochemical">Biochemical</option> 
                                                        <option value="Biochemical Residues">Biochemical Residues</option>
                                                        <option value="Bluetongue">Bluetongue</option> 
                                                        <option value="BRSV">BRSV</option> 
                                                        <option value="Brucella"> Brucella</option>
                                                        <option value="Brucellosis">Brucellosis</option> 
                                                        <option value="BSE">BSE</option> 
                                                        <option value="BVD">BVD</option> 
                                                    </select>
                                                </div>
                                                <div class="govuk-form-group sup_margin_0">
                                                    <label for="dpcustomer" class="govuk-label">Customer:</label>
                                                    <select class="govuk-select sup_select_option_width_100" required="" id="dpcustomer"
                                                        aria-label="Default select example">
                                                        <option value="">--select customer--</option>
                                                        <option value="DEFRA Commission(Core)" selected>DEFRA Commission(Core)</option>
                                                        <option value="Delacon">Delacon</option>
                                                        <option value="Department of Health">Department of Health</option>
                                                        <option value="Dept For Int Development">Dept For Int Development</option>
                                                        <option value="Dept Of Agriculture,Food And Forestry">Dept Of Agriculture,Food And Forestry</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="govuk-grid-column-one-half">
                                                <div style="padding-top:0;padding-bottom: 0;">
                                                    <div class="govuk-form-group">

                                                        <label for="dpmanager" class="govuk-label">Manager:</label>
                                                        <!-- <input type="text" class="form-control" value="VMD" id="manager"> -->
                                                        <select class="govuk-select sup_select_option_width_100" required="" id="dpmanager"
                                                            aria-label="Default select example">
                                                            <option value="">--select Manager--</option>
                                                            <option value="Way,Kelvin" selected> Way,Kelvin </option>
                                                            <option value="Abad,Jasen"> Abad,Jasen </option>
                                                            <option value="Adamsson,Adriann">Adamsson,Adriann</option>
                                                            <option value="Addicote,Norma">Addicote,Norma </option>
                                                            <option value="Agdahl,Donal">Agdahl,Donal</option>
                                                            <option value="Ager,Berget">Ager,Berget</option>
                                                        </select>

                                                    </div>
                                                    <div class="govuk-form-group">
                                                        <label for="dpcontract" class="govuk-label">Contract:</label>

                                                        <select class="govuk-select sup_select_option_width_100" required="" id="dpcontract" aria-label="Default select example">
                                                            <option value="">--select Contract--</option>
                                                            <option value="CA0005" selected> CA0005 </option>
                                                            <option value="FECSurv"> FECSurv </option>
                                                            <option value="OM Other G"> OM Other G </option>
                                                            <option value="OM Other D"> OM Other D </option>
                                                            <option value="test1"> test1 </option>
                                                            <option value="PI:040"> PI:040 </option>
                                                            <option value="PI:160"> PI:160 </option>
                                                            <option value="Profit"> Profit </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div style="padding-bottom:0">
                                                    <div class="govuk-form-group sup_margin_0">
                                                        <label for="txt-description" class="govuk-label">Comments</label>
                                                        <textarea class="govuk-textarea sup_margin_0" id="txt-description"
                                                            rows="5">AG 31 Washington State University Wellcome Trust FZ223 Welsh Government Whipsnade Zoo Wildfowl and Wetlands Trust Wizz Air WRAP WRc-NSF Ltd Wye College Zeneca Central Toxicology Lab Zoetis (Walton on the Hill)</textarea>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        

                                    </div>
                                </div>

                      <div class="sup_border govuk-grid-column-full sup_margin_bottom_left_10 sup_p_0"
                            style="padding: 0 0 0 0px;
                                                  margin: 10px 0 10px 10px;   display: flex;padding-bottom: 10px;    flex-direction: column;">
                            <div>
                                <h2 class="sup_border-bottom sup_text_color sup_heading_bg_color govuk-heading-s sup_align_heading"> Financial Data</h2>
                            </div>
                            <div  class="sup_financial_area_wrapper govuk-grid-row">
                                <div class="govuk-grid-column-one-half">

                                    <!-- <div class="mb-2">
                                        <label for="budget-cm" class="form-label">Budget-CVL:</label>
                                        <input type="text" class="form-control" value="£0" id="budget-cm">
                                    </div> -->

                                    <div class="govuk-form-group">
                                        <label class="govuk-label" for="budget-cm">Budget-CVL: </label>
                                        <input class="govuk-input" id="budget-cm" name="budgetcm" type="text" autocomplete="budget-cm">
                                    </div>


                                    <div class="govuk-form-group">
                                        <label for="transfer-inc" class="govuk-label">Transfer Inc:</label>
                                        <input type="text" class="govuk-input" id="transfer-inc">
                                    </div>
                                    <div class="govuk-form-group sup_margin_bottom_20">
                                        <label for="txtBudgetExt" class="govuk-label">Budget-Ext:</label>
                                        <input type="text" class="govuk-input" id="txtBudgetExt">
                                    </div>
                                    <div class="govuk-form-group sup_margin_0">
                                        <label for="txtPVSInc" class="govuk-label">PVS Inc:</label>
                                        <input type="text" class="govuk-input" id="txtPVSInc">
                                    </div>
                                </div>
                                <div class="govuk-grid-column-one-half">
                                    <div class="govuk-form-group" style="padding-top: 0;padding-bottom: 0;">
                                        <label for="txtWIPEOY" class="govuk-label">WIP-EOY:</label>
                                        <input type="text" class="govuk-input" id="txtWIPEOY">
                                    </div>
                                    <div style="display: flex;                     justify-content: flex-start;                   gap: 26px;">
                                        <div class="govuk-form-group">
                                            <label for="txtWIPLimit" class="govuk-label">WIP-Limit:</label>
                                            <input type="text" class="govuk-input" id="txtWIPLimit">
                                        </div>
                                        <div class="govuk-form-group">
                                            <label for="txtWIPCur" class="govuk-label">WIP_Cur:</label>
                                            <input type="text" class="govuk-input" id="txtWIPCur">
                                        </div>
                                    </div>
                                    <div class="govuk-form-group sup_margin_0" style="    border: 2px dashed #8c8c8c;
                                            display: flex; 
                                            padding: 0px 10px 10px 10px; 
                                            flex-direction: column;
                                            justify-content: space-between;">
                                        <div class="col-sm-12">
                                            <!-- <label for="txtForecast" class="govuk-label"> Forecast:</label>
                                            <input type="text" class="govuk-input" value="£0" id="txtForecast"> -->


                                            <div class="govuk-form-group">
                                                <label for="txtForecast" class="govuk-label">Forecast:</label>
                                                <input type="text" class="govuk-input" value="£0"  id="txtForecast">
                                            </div>

                                        </div>
                                        <div class="col-sm-11" style="padding-top: 0;">
                                            <button class="govuk-button sup_margin_0" aria-label="Profile by month"
                                                onclick="onClickProfileByMonth()" aria-label="Profile By Month">Profile
                                                By
                                                Month</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                           <div class="govuk-grid-row" style="text-align:right;margin: 5px 0px 5px 0;">
                                            <!-- <button class="btn btn-primary"
                                                aria-label="Save BUisness Area details">Save</button> -->
                                 <button type="button" class="govuk-button sup_margin_0" aria-label="Save Business Area details" id="btnProjectMaintenance"
                                                        data-module="govuk-button">Save</button>
                                        </div>         
                        
                    </div>
                <div class="govuk-grid-column-one-half">
                    <div >
                            <div class="sup_border">
                                <h2 class="sup_border-bottom sup_text_color sup_heading_bg_color govuk-heading-s sup_align_heading" id="headingOne">

                                    Project's Job Code


                                </h2>
                                <div
                                    style="display: flex;flex-direction: row;  justify-content: space-between; align-items: center;">
                                    <div class="govuk-grid-column-two-thirds" style="padding-top: 0; padding-left: 6px; padding-bottom: 0;">
                                        <label for="txtSearchProjectCode" class="sr-only">Search</label>
                                        <input type="text" id="txtSearchProjectCode" class="govuk-input"
                                            style="padding: 5px; margin: 5px 0px;"
                                            placeholder="Search by jobcode or name or type or workgroup">
                                    </div>

                                    <div class="govuk-grid-column-one-third" style="padding: 0 8px 0 0; text-align: right;">
                                       
                                        <div class="govuk-button-group sup_margin_0" style="float:right">
                                            <button type="button" class="govuk-button sup_margin_0 sup_p_8" id="addJobcodeBtn" aria-label="Add job code"
                                                data-module="govuk-button">
                                                <!-- <img alt="plus icon for add job code" src="../images/circle-plus-solid-full-white.svg" width="16px" />&nbsp; -->
                                               + &nbsp; Add Job Code
                                            </button> 
                                        </div>
                                    </div>

                                </div>
                                <!-- <table style="margin-bottom: 0;"
                                                    class="table tbl-border">
                                                    <thead class="thead-light">
                                                        <tr>
                                                            

                                                             <th style="width: 9.75%;">Job code</th>
                                                            <th style="width: 22%;">Name</th>
                                                            <th style="width: 6%;">Type</th>
                                                            <th style="width: 10%;">Work Group</th>
                                                            <th style="width:11%">Action</th>
                                                        </tr>
                                                    </thead>
                                                </table> -->
                                <div class="jobcodediv" style="max-height: 396px; height: 396px;border:0 !important;">
                                    <table class="govuk-table custom-table"
                                        style="margin-bottom: 0px;">
                                        <thead class="govuk-table__head">
                                            <tr class="govuk-table__row">
                                                <th scope="col" class="govuk-table__header">Job Code</th>
                                                <th scope="col" class="govuk-table__header">Name</th>
                                                <th scope="col" class="govuk-table__header">Type</th>
                                                <th scope="col" class="govuk-table__header">Work Group</th>
                                                <th scope="col" class="govuk-table__header">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody class="govuk-table__body" id="tableBody">
                                            <!-- Data will be populated by JavaScript -->
                                        </tbody>
                                    </table>

                                </div>
                                <div class="sup_pagination_wrapper">
                                    <div class="sup_margin_left_right_10">
                                        <label for="recordsPerPage">Records per page</label>
                                        <select id="recordsPerPage" class="govuk-select sup_select_pagination_width" aria-label="Select number of records per page">
                                            <option value="5">5</option>
                                            <option value="10" selected>10</option>
                                            <option value="15">15</option>
                                            <option value="20">20</option>
                                            <option value="25">25</option>
                                            <option value="30">30</option>
                                        </select>
                                    </div>
                                    <nav class="govuk-pagination sup_margin_left_right_10" aria-label="Pagination">
                                            
                                            <ul class="govuk-pagination__list" id="pagination">
                                                
                                            </ul>
                                    </nav>
                                 

                                </div>
                            </div>
                            <div id="section2" class="sup_border" style="padding-left: 0; padding-right: 0;margin-top: 20px; margin-bottom: 10px;">
                                <h2 class="sup_border-bottom sup_text_color sup_heading_bg_color govuk-heading-s sup_align_flexheading sup_decrease_font_size_s" id="headingOne">

                                    Time Code Validity for Project's Job Code &nbsp; <div style="display:flex;flex-direction:row"><span id="displayJobcode"></span> &nbsp; <span id="displayProjectcode"></span></div>
                                </h2>
                                <div id="notimejobfound"
                                    style=" height: 510px; padding: 80px; text-align: center; border-top: 0;     border-radius: 0 0 10px 10px;     display: flex;   align-items: flex-start;   justify-content: center;">
                                    No
                                    Job code selected</div>


                                <div id="timejobdiv">

                                    <div
                                        style="display: flex;flex-direction: row;   align-items: center;">
                                        <div class="govuk-grid-column-one-half"
                                            style="padding-top: 0;    padding-left: 6px;    padding-bottom: 0;">
                                            <label for="txtSearchTimeCode" class="sr-only">Search</label>

                                            <input type="text" id="txtSearchTimeCode" class="govuk-input"
                                                style="padding: 5px; margin: 5px 0px;"
                                                placeholder="Search by workgroup or jobcode">
                                        </div>

                                        <div class="govuk-grid-column-two-thirds" style="margin-right:2px;padding:0">
                                                <div class="govuk-button-group sup_margin_0" style="    display: flex;    justify-content: flex-start;    gap: 4px;">
                                                    <button class="govuk-button sup_margin_0 sup_flex_row_center_center" data-module="govuk-button" id="addTimecodeBtn"  data-bs-toggle="modal"
                                                                    data-bs-target="#timecodeModal"><img src="../images/circle-plus-solid-full-white.svg" alt="plus icon for add time code" width="16px" /> Time
                                                                    Code</button>
                                                    <button class="govuk-button sup_margin_0 sup_flex_row_center_center" data-module="govuk-button" id="transferTimecodeBtn" data-bs-toggle="modal"
                                                                    data-bs-target="#transferTimecodeModal"><img src="../images/copy-regular-full-white.svg" alt="Copy Time code for selected workgroup" width="16px"/> Copy Time
                                                                    Code</button>
                                                     <button type="button" class="govuk-button govuk-button--warning sup_margin_0 sup_flex_row_center_center" data-module="govuk-button" id="deleteAllTCBtn"><img src="../images/trash-can-regular-full-white.svg" alt="Delete all selected time code" width="16px"/> Delete All</button>
                                                </div>
                                            
                                        </div>

                                    </div>


                                    <!-- class="govuk-button govuk-button--secondary sup_margin_0" data-module="govuk-button" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="govuk-button sup_margin_0" data-module="govuk-button"  -->

                                    <div class="timejobdiv" style="height: 302px;">
                                        <table id="timejobtable"
                                            class="table table-striped table-bordered timecode-table custom-table">
                                            <thead class="thead-light">
                                                <tr>
                                                <th style="border-left: 0; text-align:left;">
                                                
                                                    <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes" style=" display: flex; align-items: center;  justify-content: flex-start;">
                                                        <div class="govuk-checkboxes__item" >
                                                            <input type='checkbox' class="govuk-checkboxes__input" id="selectAllTC" name="selectAllTC" />
                                                            <label class="govuk-label govuk-checkboxes__label sup_label_auto_width" for="selectAllTC"> </label>
                                                        </div>
                                                        Select all
                                                    </div> 
                                                </th>
                                                    <th style="border-left: 0;">Work Group</th>
                                                    <th style="width:20px">Active</th>
                                                    <th>JobCode</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="timejobtabletableBody">
                                                <!-- Data will be populated by JavaScript -->
                                            </tbody>

                                        </table>
                                    </div>
                                    <div class="sup_pagination_wrapper">
                                        <!-- Pagination -->
                                        <div class="sup_margin_left_right_10">
                                            <label for="recordsPerPg">Records per page</label>
                                            <select id="recordsPerPg" class="govuk-select sup_select_pagination_width" 
                                                aria-label="Select number of records per page">
                                                <option value="5">5</option>
                                                <option value="10" selected>10</option>
                                                <option value="15">15</option>
                                                <option value="20">20</option>
                                                <option value="25">25</option>
                                                <option value="30">30</option>
                                            </select>
                                        </div>
                                        <!-- <nav aria-label="Page navigation">
                                            <ul class="pagination justify-content-center" id="timecodepagination"
                                                style="margin: 0;"> 
                                            </ul>
                                        </nav> -->

                                        <nav class="govuk-pagination sup_margin_left_right_10" aria-label="Pagination">
                
                                            <ul class="govuk-pagination__list" id="timecodepagination">
                                                
                                            </ul>
                                        </nav>

                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
        </div>
 

    </div>
</div>
    </div>
    <div class="footer">
        <p>&copy; copyright Defra 2025</p>
    </div>

    <div class="modal fade" id="testModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header flex-space-center"> 
                    <h3 class="govuk-heading-s" style="margin: 0;" id="exampleModalLabel">Add Job code</h3>
                    <button type="button" class="btn-close" onclick="closeModal()">x</button>
                </div>
                <div class="modal-body" style="padding-top: 5px !important;    overflow: hidden;    padding: 0;">
                    <form class="govuk-grid-column-full" id="formAddJobcode">
                          <!-- <div class="govuk-form-group">
                                        <label class="govuk-label" for="budget-cm">Budget-CVL: </label>
                                        <input class="govuk-input" id="budget-cm" name="budgetcm" type="text" autocomplete="budget-cm">
                                    </div> -->
                        <div class="govuk-form-group">
                            <label for="modal-jobcode" class="govuk-label">Job code:</label>
                            <input type="text" class="govuk-input" id="modal-jobcode">
                        </div>
                        <div class="govuk-form-group">
                            <label for="modal-name" class="govuk-label">Name:</label>
                            <!-- <input type="text" class="form-control" id="modal-name"> -->
                            <textarea class="govuk-textarea sup_margin_0" id="modal-name" rows="3"></textarea>
                        </div>
                        <div class="govuk-form-group">
                            <label for="modal-type" class="govuk-label">Type</label>
                            <!-- <input type="text" class="form-control" > -->
                            <select class="govuk-select" id="modal-type">
                                <option value="">--select--</option>
                                <option value="Work">Work</option>
                                <option value="Other">Other</option>
                                <option value="Consultancy">consultancy</option>
                                <option value="Expertise">Database</option>
                            </select>

                        </div>
                        <div class="govuk-form-group">
                            <label for="modal-workgroup" class="govuk-label">Work Group</label>
                            <!-- <input type="text" class="form-control" id=""> -->
                            <select class="govuk-select" id="modal-workgroup">
                                <option value="">--select--</option>
                                <option value="Wilelife">Wilelife</option>
                                <option value="CSCS">CSCS</option>
                                <option value="BSE">BSE</option>
                                <option value="MRSA">MRSA</option>
                                <option value="Bees">Bees</option>
                                <option value="Bees">Bees</option>
                                <option value="CIT">CIT</option>

                            </select>
                        </div>

                        <div class="govuk-checkboxes govuk-checkboxes--small" id="divCopywithworkgroup" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                        
                                <input class="govuk-checkboxes__input" id="chkcopywithworkgroup" name="chkcopywithworkgroup" type="checkbox" value="" aria-label="Checkbox for copy with Time code">
                                <label class="govuk-label govuk-checkboxes__label sup_label_auto_width" for="chkcopywithworkgroup" >
                                    Copy with Time code
                                </label>
                            </div> 
                       </div>

                    </form>
                </div>
                <div class="modal-footer" style="    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-direction: row;">
                    <button type="button" class="govuk-button govuk-button--secondary sup_margin_0" data-module="govuk-button" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="govuk-button sup_margin_0" data-module="govuk-button" id="modalsaveBtn">  Save</button>
                    <button type="button" class="govuk-button sup_margin_0" data-module="govuk-button" id="modalcopySaveBtn">Save Copy</button>
                    <button type="submit" class="govuk-button sup_margin_0" data-module="govuk-button" id="updateBtn" style="display: none;"> Update</button>
                    
                </div>

            </div>
        </div>
    </div>

 


    <!-- <div class="modal fade" id="timecodeModal" tabindex="-1" aria-labelledby="timecodeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header flex-space-center">
                    <h5 class="modal-title" style="margin: 0;" id="timecodeModalLabel">Add Time code</h5>
                    <button type="button" class="btn-close" onclick="closeModal()">x</button>
                </div>
                <div class="modal-body" style="padding-top: 5px;"> -->


    <div class="modal" id="timecodeModal" tabindex="-1">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header flex-space-center">
                    <h3 class="modal-title m-0" id="timecodeModalLabel">Add Time Code</h3>
                    <button type="button" class="btn-close btn-red" onclick="closeTCModal()">X</button>
                </div>
                <div class="modal-body" style="overflow: hidden;  padding: 8px 16px 0 0px;">

                    <form class="govuk-grid-column-full" id="formAddTimecode">
                        <div class="govuk-form-group">
                            <label for="dpworkgroup" class="govuk-label">Work Group:</label>
                            <select class="govuk-select" id="dpworkgroup">
                                <option value="">--select--</option>
                                <option value="CIT">CIT</option>
                                <option value="CSCC">CSCC</option>
                                <option value="CSCE">CSCE</option>
                                <option value="CSCW">CSCW</option>
                                <option value="EUExit">EUExit</option>
                                <option value="Operations">Operations</option>
                                <option value="PHINSLT">PHINSLT</option>
                                <option value="PHSISW">PHSISW</option>
                                <option value="PHSI-WCS">PHSI-WCS</option>
                                <option value="QAU">QAU</option>
                                <option value="ROMD">ROMD</option>
                                <option value="RONT">RONT</option>
                                <option value="ROSC">ROSC</option>
                                <option value="ROSW">ROSW</option>
                                <option value="SVBU">SVBU</option>
                            </select>
                        </div>
                        <div class="govuk-form-group">
                              <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                                                    <div class="govuk-checkboxes__item">
                                                
                                                        <input class="govuk-checkboxes__input" id="chktimecodestatus" name="chktimecodestatus" type="checkbox" value="" 
                                        aria-label="Checkbox for following text input"> 
                                                        <label class="govuk-label govuk-checkboxes__label sup_label_auto_width" for="chktimecodestatus">
                                                            Active
                                                        </label>
                                                    </div> 
                                                    
                                                </div>
                        </div>
                        <div class="govuk-form-group">
                            <label for="dpjobcode" class="govuk-label">Job Code</label>
                            <select class="govuk-select"  id="dpjobcode">
                                <option value="">--select--</option>
                                <option value="AH003300">AH003300</option>
                                <option value="AH003301">AH003301</option>
                                <option value="AH003302">AH003302</option>
                                <option value="AH003303">AH003303</option>
                                <option value="AH003304">AH003304</option>
                                <option value="AH003305">AH003305</option>
                                <option value="AH003306">AH003306</option>
                                <option value="AH003307">AH003307</option>
                                <option value="AH003308">AH003308</option>
                                <option value="AH003309">AH003309</option>
                                <option value="AH003310">AH003310</option>
                                <option value="AH003311">AH003311</option>
                                <option value="AH003315">AH003315</option>
                                <option value="AH003317">AH003317</option>
                            </select>
                        </div>
                        <!-- <div class="mt-2">
                        <button class="btn btn-primary" type="submit" >Save</button> 
                        </div> -->
                    </form>
                </div>
                <div class="modal-footer" style="display: flex; justify-content: space-between; align-items: center;flex-direction: row;">
                    <button class="govuk-button govuk-button--secondary sup_margin_0" aria-label="Cancel" onclick="closeTCModal()">Cancel</button>
                    <button class="govuk-button sup_margin_0" aria-label="Save" id="modaltcsaveBtn">Save</button>
                    <button class="govuk-button sup_margin_0" aria-label="Update" id="updateBtn" style="display: none;">Update</button>
                </div>
              
            </div>
        </div>
    </div>

     <div class="modal" id="transferTimecodeModal" tabindex="-1">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header flex-space-center">
                    <h3 class="modal-title m-0" id="transfertimecodeModalLabel">Copy time code to selected job code</h3>
                    <button type="button" class="btn-close btn-red" onclick="closeCopyTCModal()">X</button>
                </div>
                <div class="modal-body">
                    <div class="col-6" style="padding-bottom: 0;padding: 0;">
                        <div class="govuk-form-group mb-2">
                            <label class="govuk-label" for="dpTargetJobcode">Select target Job code</label>
                            <select class="govuk-select sup_select_option_width_100" id="dpTargetJobcode" name="dpTargetJobcode"
                                aria-label="programme select">
                                <option value="">--select --</option>
                            </select>
                        </div>
                    </div>
                
                </div>
                <div class="modal-footer" style="display: flex; justify-content: space-between; align-items: center;flex-direction: row;">
                     <button class="govuk-button govuk-button--secondary sup_margin_0" aria-label="Cancel" onclick="closeCopyTCModal()">Cancel</button>
                    <button class="govuk-button sup_margin_0" aria-label="Save" id="modalCopyTCsaveBtn">Save</button>
                </div>
            </div>
        </div>
    </div>

    <script>

        const urlParams = new URLSearchParams(window.location.search);
        const encoded = urlParams.get("data");

        if (encoded) {
            const obj = JSON.parse(atob(encoded));
            console.log(obj);   // full object received
            // document.getElementById("result").innerText =
            //   `ID: ${obj.id}, Name: ${obj.name}, City: ${obj.jobcode}`;

            document.getElementById('project-code').value = obj.jobcode;
            document.getElementById('project-title').value = obj.name;
            document.getElementById('displayProjectcode').style.visibility = "hidden";
            document.getElementById('displayProjectcode').innerText = obj.jobcode;
            //    document.getElementById("tbl").style.display = 'flex';
            //   document.getElementById("shortnav").style.display = 'flex';
            //  document.getElementById("invoicebtns").style.display = 'flex';
        }

        let selectedRow = null;
        // document.getElementById("exampleModalLabel").innerText = "Add Job code"
        //  const myModal = document.getElementById('exampleModal');

        // document.getElementById("modalsaveBtn").style.display = "block";
        // document.getElementById("updateBtn").style.display = "none";
        // document.getElementById("shortnav").style.display = 'none';
        //document.getElementById("businessfinancial-div").style.display = 'none';
        // document.getElementById("btnSection2").addEventListener("click", function () {
        //     document.getElementById("section2").scrollIntoView({ behavior: "smooth" });
        // });

        // document.getElementById("btnSection1").addEventListener("click", function() {
        //     document.getElementById("section1").scrollIntoView({ behavior: "smooth" });
        // });
        //  document.getElementById("tbl").style.display = 'none';
        // document.getElementById("invoicebtns").style.display = 'none';
        // document.getElementById("selectedproject").style.display = 'none';
        // document.getElementById("dpselectproject").addEventListener("change", function () {
        // const selectedValue = this.value;
        // document.getElementById("selectedproject").style.display = 'block';
        //  document.getElementById('project-code').value = selectedValue?.split("|")[0];
        //  document.getElementById('project-title').value = selectedValue?.split("|")[1];
        //  document.getElementById("tbl").style.display = 'flex';
        //  document.getElementById("shortnav").style.display = 'flex';
        // document.getElementById("invoicebtns").style.display = 'flex';
        //   document.getElementById("businessfinancial-div").style.display = 'flex';
        //  console.log("Selected:", selectedValue);
        //  });
        //  document.getElementById("notimejobfound").style.display = 'block';
        // document.getElementById("timejobdiv").style.display = 'none';



        //    let editrowbtn = document.getElementById("editrowbtn");
        //     editrowbtn.addEventListener("click",function(){
        //         alert('eidt');
        //         document.getElementById("exampleModalLabel").innerText = "Edit Job code"
        //         document.getElementById("updateBtn").style.display = "inline-block"; 
        //     })




        function addRowEX() {
            const table = document.getElementById("tblprojectjobcode").querySelector("tbody");
            let c = 0;
            const newRow = document.createElement("tr");
            newRow.setAttribute("onclick", "selectRow(this)");

            //  const tr = document.createElement("tr");
            for (let i = 0; i < 4; i++) {
                const td = document.createElement("td");
                td.innerHTML = `<input type="text" class="form-control">`;
                newRow.appendChild(td);
            }

            // newRow.innerHTML = `
            //     <td>New Item</td>
            //     <td>${c++}</td>
            //      <td>New Item ${c++}</td>
            //     <td>${Date.now()}</td>
            // `;



            const saveBtn = document.createElement("button");
            saveBtn.className = "btn btn-link btn-sm";
            // saveBtn.innerHTML = `Save`;

            saveBtn.dataset.mode = "Save";
            saveBtn.innerHTML = `<img src="../images/square-check-regular-full.svg" alt="save icon" width="20">`;
            saveBtn.addEventListener("click", function () {
                const cells = firstdiv.querySelectorAll("div");
                const editBtn = document.createElement("button");
                editBtn.className = "btn btn-link btn-sm ms-2";
                editBtn.innerHTML = `<img src="../images/pen-to-square-regular-full.svg" width="20">`;
                // Convert input → text
                for (let i = 0; i < 4; i++) {
                    const input = cells[i].querySelector("input");
                    cells[i].innerText = input.value;
                }
            });

            table.appendChild(newRow);
        }


        // editBtn.addEventListener("click", function () {
        //     const cells = newRow.querySelectorAll("td");
        //     for (let i = 0; i < 4; i++) {
        //         const text = cells[i].innerText;
        //         cells[i].innerHTML = `<input type="text" class="form-control" value="${text}">`;
        //     }
        //     actionTd.innerHTML = "";
        //     actionTd.appendChild(saveBtn);
        // });

        function editRow(event) {
            event.stopPropagation();
            const btn = event.target.closest("button");
            const tr = btn.closest("tr");
            const cells = tr.querySelectorAll("td");

            if (!btn.dataset.mode || btn.dataset.mode === "edit") {

                for (let i = 0; i < 4; i++) {
                    const text = cells[i].innerText.trim();
                    cells[i].innerHTML = `<input type="text" class="form-control" value="${text}">`;
                }

                btn.dataset.mode = "save";
                btn.innerHTML = `<img src="../images/square-check-regular-full.svg" alt="Save icon for edited data" width="20">`;
                return;
            }

            for (let i = 0; i < 4; i++) {
                const input = cells[i].querySelector("input");
                cells[i].innerText = input.value;
            }

            btn.dataset.mode = "edit";
            btn.innerHTML = `<img src="../images/pen-to-square-regular-full.svg" alt="Edit icon for selected data" width="20">`;
        }


        function editRowTWO(event) {
            event.stopPropagation();
            let tr = event.target.closest("tr");
            let cells = tr.querySelectorAll("td");   // only editable divs
            const btn = event.target;
            //  btn.dataset.mode = "edit";
            if (!btn.dataset.mode || btn.dataset.mode === "edit") {
                // cells.forEach(div => {
                //     let input = div.querySelector("input"); 

                //     div.textContent = input.value;
                // });
                //   for (let i = 0; i < 4; i++) {
                //     const input = cells[i].querySelector("input");
                //     cells[i].innerText = input.value;
                // }

                for (let i = 0; i < 4; i++) {
                    const text = cells[i].innerText;
                    cells[i].innerHTML = `<input type="text" class="form-control" value="${text}">`;
                }


                btn.dataset.mode = "save";
                btn.innerHTML = `<img src="../images/square-check-regular-full.svg" width="20">`;
                return;
            }

            // // Edit mode
            // cells.forEach(div => {
            //     let value = div.innerText;
            //     div.innerHTML = `<input class="form-control" value="${value}" />`;
            // });


            //  const cells = newRow.querySelectorAll("td");

            // Replace input with text
            for (let i = 0; i < 4; i++) {
                const input = cells[i].querySelector("input");
                cells[i].innerText = input.value;
            }


            btn.dataset.mode = "edit";
            btn.innerHTML = `<img src="../images/pen-to-square-regular-full.svg"" width="20">`;
            // const cells = newRow.querySelectorAll("td");

            // Replace input with text
            // for (let i = 0; i < 4; i++) {
            //     const input = cells[i].querySelector("input");
            //     cells[i].innerText = input.value;
            // }
        }


        function addRow(event) {
            event.stopPropagation();
            const table = document.getElementById("tblprojectjobcode").querySelector("tbody");

            const newRow = document.createElement("tr");
            newRow.onclick = function () { onclickRow(this); };

            // Create 4 input cells
            for (let i = 0; i < 4; i++) {
                const td = document.createElement("td");
                td.innerHTML = `<input type="text" class="form-control">`;
                newRow.appendChild(td);
            }

            // Create Save button cell
            const actionTd = document.createElement("td");
            const saveBtn = document.createElement("button");
            saveBtn.className = "btn btn-light btn-sm";
            saveBtn.innerHTML = `<img src="../images/check-solid-full.svg" alt="Save icon for new data" width="20">`;
            //saveBtn.innerText = "Save";

            saveBtn.addEventListener("click", function () {
                const cells = newRow.querySelectorAll("td");

                // Replace input with text
                for (let i = 0; i < 4; i++) {
                    const input = cells[i].querySelector("input");
                    cells[i].innerText = input.value;
                }

                // Replace Save button → Edit button
                actionTd.innerHTML = "";
                // editRow(this);
                const editBtn = document.createElement("button");
                editBtn.className = "btn btn-light btn-sm";
                // editBtn.innerText = "Edit";
                editBtn.innerHTML = `<img src="../images/pen-to-square-regular-full.svg" alt="Edit icon for selected data" width="20">`;
                actionTd.appendChild(editBtn);

                editBtn.addEventListener("click", function (event) {
                    event.stopPropagation();
                    const cells = newRow.querySelectorAll("td");
                    for (let i = 0; i < 4; i++) {
                        const text = cells[i].innerText;
                        cells[i].innerHTML = `<input type="text" class="form-control" value="${text}">`;
                    }
                    actionTd.innerHTML = "";
                    actionTd.appendChild(saveBtn);
                });
            });

            actionTd.appendChild(saveBtn);
            newRow.appendChild(actionTd);

            table.appendChild(newRow);
        }

        function selectRow(row) {
            document.querySelectorAll("#myTable tbody tr")
                .forEach(r => r.classList.remove("selected-row"));

            row.classList.add("selected-row");
        }




        function deleteRow(btn) {
            btn.closest("tr").remove();
        }


        function backToSearchGrid() {
            alert('hi');
            window.location.href = "project_maintenance_five.three.html";
        }

            function toggleSidebar() {
            const sidebar = document.querySelector('.sidenav');
            sidebar.classList.toggle('collapsed');
        }

        document.getElementById("btnProjectMaintenance").addEventListener("click",function(){ 
            //Business Area
            const prg = document.getElementById("dpprogramme");
            const selectedValue = prg.value;
            prg.value = selectedValue;

            const status = document.getElementById("dpstatus");
            const selectedStatus = status.value;
            status.value = selectedStatus;


            const manager = document.getElementById("dpmanager");
            const selectedManager = manager.value;
            manager.value = selectedManager;

            const customer = document.getElementById("dpcustomer");
            const selectedCustomer = customer.value;
            customer.value = selectedCustomer;

            const disease = document.getElementById("dpdisease");
            const selectedDisease = disease.value;
            disease.value = selectedDisease;

            const contract = document.getElementById("dpcontract");
            const selectedcontract = contract.value;
            contract.value = selectedcontract;
            //Financial data
            const budgetCM = document.getElementById("budget-cm");
            const budgetCMValue = budgetCM.value;
            budgetCM.value = budgetCMValue;

            const inc = document.getElementById("transfer-inc");
            const incValue = inc.value;
            inc.value = incValue;

            const budgetExt = document.getElementById("txtBudgetExt");
            const budgetExtVal = budgetExt.value;
            budgetExt.value = budgetExtVal; 

            alert("Project details has been saved successfully!");

        })
    </script>

    <script src="../js/menuscript.js"></script>
    <script src="../js/pact_js/modalpopup.js"></script>
    <script src="../js/timecode.js"></script>
          <!-- <script type="module" src="/javascripts/application-example-c1523c2b5e17dfe3bf4942b2c70ecb6d.js"></script> -->
</body>

</html>